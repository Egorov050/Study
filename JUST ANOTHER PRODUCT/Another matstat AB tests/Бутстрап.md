Фундаментальный принцип бутстрапа заключается в использовании повторной выборки с возвращением из исходных данных для создания множества выборок (бутстрап-выборок). Этот метод позволяет оценивать статистики, такие как среднее, дисперсия или доверительные интервалы, даже в тех случаях, когда нет явных предположений о распределении данных или когда размер выборки недостаточно велик для использования асимптотических теорем. Единственная предпосылка, которая нужна для бутстрапа это большое количество наблюдений. Также стоит отметить, что бутстрап это ассимптотическая техника, но с цпт она не имеет никакой связи. 

В чем суть. У нас есть определенная выборка, она большая и состоит из `n` элементов.  Она настолько большая, что мы можем из нее получить бутстраповские выборки , которые будут иметь такую же размерность `n` . Таких выборок мы можем сделать `b` штук, при этом у каждой выборки мы считаем тот параметр, который нам интересен. Будь то это медиана или иная штука. 

Работа с бутстрапом это работа с доверительным интервалом. Есть три способа как сформировать этот доверительный интервал. Рассмотрим каждый из них. 

<h6>Эфронов доверительный интервал ( Перцентильный ) </h6>
Итак, пусть у нас есть выборка  ${x_1}$, ${x_2}$, ${x_3}$ ... ${x_n}$
Из нее мы генерируем `b` количество выборок  и для каждой выборки мы считаем нашу метрику ( *в нашем случае это медиана* ):

- sample 1 : ${x_1}$, ${x_2}$, ${x_3}$ ... ${x_n}$  ,  ${med_1}$
- sample 2 : ${x_1}$, ${x_2}$, ${x_3}$ ... ${x_n}$ ,  ${med_2}$
- sample 3 : ${x_1}$, ${x_2}$, ${x_3}$ ... ${x_n}$ ,  ${med_3}$
- ....................................................
- sample b : ${x_1}$, ${x_2}$, ${x_3}$ ... ${x_n}$ ,  ${med_b}$

Далее, мы наши медианы выборок загоняем в массив и строим гистограмму. 

И уже для основываясь на полученном распределении мы определяем  $alpha$ - процентиль и $1 -alpha$ процентиль для распределения статистик, полученных из бутстрап-выборок. Здесь $alpha$ - это уровень значимости (например, для 95% доверительного интервала $alpha$ = 0.025).

И далее строим доверительный интервал : 

$$
(\theta_{\text{lower}}, \theta_{\text{upper}}) = (\theta_{\alpha}, \theta_{1 - \alpha})
$$

Как это делается на питоне. 
Для начала давайте напишем функцию, которая будет генерировать наши бутстрап семплы : 

```python

```




https://www.youtube.com/watch?v=Zki9VMzxcFU

https://www.youtube.com/watch?v=oRCzEPDMPBQ
https://www.youtube.com/watch?v=-zps6hm0nX8&t=1125s


https://www.youtube.com/watch?v=O6FXzCFnJxM&t=3381s



https://github.com/30lm32/ml-ab-testing


https://www.kaggle.com/datasets/podsyp/how-to-do-product-analytics/data